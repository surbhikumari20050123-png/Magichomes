<!doctype html>
<html><head>
<meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>MagicHome — Booking Confirmed</title>
<link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
<link rel="stylesheet" href="assets/styles.css"/>
<script src="https://cdn.jsdelivr.net/npm/jspdf@2.5.1/dist/jspdf.umd.min.js"></script>
</head>
<body class="bg-white text-gray-900">
<header class="bg-white sticky top-0 z-30 shadow-sm">
  <div class="max-w-7xl mx-auto px-4 py-4 flex items-center justify-between">
    <div class="text-2xl font-extrabold text-primary">MagicHome</div>
    <nav class="hidden md:flex items-center gap-6 text-sm">
      <a class="navlink" href="index.html">Home</a>
      <a class="navlink" href="my-bookings.html">My Bookings</a>
    </nav>
  </div>
</header>

<main class="max-w-3xl mx-auto px-4 py-10">
  <div class="card bg-white p-6">
    <h1 class="text-2xl font-bold text-green-700">Booking Successful</h1>
    <p class="text-gray-700 mt-2">Your token payment was received.</p>
    <div id="ref" class="mt-4 text-sm"></div>
    <div class="mt-6 flex gap-3">
      <a class="px-4 py-2 btn-primary rounded" href="index.html">Back to Home</a>
      <button class="px-4 py-2 bg-gray-200 rounded" onclick="window.print()">Print Receipt</button>
      <button class="px-4 py-2 bg-gray-900 text-white rounded" id="pdf">Download PDF</button>
    </div>
  </div>
</main>

<script>
// Inline functions for file:// compatibility
function money(n){ try{ return Number(n).toLocaleString(); }catch(e){ return n; } }
function qs(name){ const u=new URL(location.href); return u.searchParams.get(name); }
const bookingId = qs('bookingId') || 'BOOK-DEMO-456';
const paymentId = qs('paymentId') || 'PAY-DEMO-789';
// Mock booking details for demo
const mockBooking = {
  apartment: "2BHK in Kothrud, Pune #152",
  address: "123, Kothrud, Pune",
  rent: 25000,
  tokenAmount: 1250
};
document.getElementById('ref').innerHTML = `
  <div class="mt-4 p-4 bg-gray-50 rounded">
    <div><b>Apartment:</b> ${mockBooking.apartment}</div>
    <div><b>Address:</b> ${mockBooking.address}</div>
    <div><b>Monthly Rent:</b> ₹ ${money(mockBooking.rent)}</div>
    <div><b>Token Amount Paid:</b> ₹ ${money(mockBooking.tokenAmount)}</div>
    <div><b>Booking ID:</b> ${bookingId}</div>
    <div><b>Payment ID:</b> ${paymentId}</div>
    <div class="text-xs text-gray-500 mt-2">Keep this receipt for your records.</div>
  </div>
`;
document.getElementById('pdf').onclick = ()=>{
  const { jsPDF } = window.jspdf;
  const doc = new jsPDF();
  doc.setFontSize(16); doc.text("MagicHome — Booking Receipt", 14, 18);
  doc.setFontSize(12);
  doc.text("Booking ID: " + bookingId, 14, 30);
  doc.text("Payment ID: " + paymentId, 14, 38);
  doc.text("Thank you for booking with MagicHome.", 14, 54);
  doc.save("magichome-receipt.pdf");
};
</script>
</body></html>

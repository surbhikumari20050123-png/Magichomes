<!doctype html><html><head><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>MagicHome â€” Login / Signup</title><link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet"><link rel="stylesheet" href="/assets/styles.css"/></head>
<body class="bg-white text-gray-900"><header class="bg-white sticky top-0 z-30 shadow-sm"><div class="max-w-7xl mx-auto px-4 py-4 flex items-center justify-between"><div class="text-2xl font-extrabold text-primary">MagicHome</div><nav class="hidden md:flex items-center gap-6 text-sm"><a class="navlink" href="/index.html">Home</a><a class="navlink" href="/owner.html">Post Property</a><a class="navlink" href="/admin.html">Admin</a></nav></div></header>
<main class="max-w-md mx-auto px-4 py-10"><div class="card bg-white p-6"><h1 class="text-2xl font-bold mb-3">Login / Create Account</h1><input id="phone" class="border p-2 rounded w-full mb-2" placeholder="Phone number"/><button class="px-4 py-2 btn-primary rounded" id="req">Request OTP</button><div id="otpBox" class="hidden mt-3"><div class="text-sm text-gray-600">Demo OTP: <span id="demoOtp" class="font-mono bg-gray-100 px-2 py-1 rounded"></span></div><input id="otp" class="border p-2 rounded w-full mt-2" placeholder="Enter OTP"/><input id="name" class="border p-2 rounded w-full mt-2" placeholder="Your name"/><button class="px-4 py-2 bg-gray-900 text-white rounded mt-2" id="verify">Verify</button></div></div></main>
<script>const next=sessionStorage.getItem('redirectAfterLogin')||'/index.html'; document.getElementById('req').onclick=()=>{ const phone=document.getElementById('phone').value.trim(); if(!phone){ alert('Enter phone'); return; } fetch('/api/auth/request-otp',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({phone})}).then(r=>r.json()).then(d=>{ document.getElementById('otpBox').classList.remove('hidden'); document.getElementById('demoOtp').innerText=d.otp||''; }); }; document.getElementById('verify').onclick=()=>{ const phone=document.getElementById('phone').value.trim(); const otp=document.getElementById('otp').value.trim(); const name=document.getElementById('name').value.trim()||'User'; fetch('/api/auth/verify-otp',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({phone,otp,name})}).then(r=>r.json()).then(d=>{ if(d.token){ localStorage.setItem('sessionToken', d.token); sessionStorage.removeItem('redirectAfterLogin'); location.href=next; } else alert(d.error||'Login failed'); }); };</script></body></html>